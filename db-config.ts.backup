/**
 * 数据库连接配置
 * 这个文件用于从.env文件中读取数据库连接信息
 */

// 数据库连接类型
export interface DbConnection {
  id?: number;
  name: string;
  host: string;
  port: number;
  username: string;
  password: string;
  database_name: string;
  db_type: string;
  connection_string?: string;
}

// 从环境变量中读取数据库连接信息
const db1Connection: DbConnection = {
  id: 1,
  name: process.env.DB1_NAME || '127_docker',
  host: process.env.DB1_HOST || '127.0.0.1',
  port: parseInt(process.env.DB1_PORT || '3306'),
  username: process.env.DB1_USER || 'root',
  password: process.env.DB1_PASSWORD || 'root',
  database_name: process.env.DB1_DATABASE || 'sqlrest',
  db_type: process.env.DB1_TYPE || 'mysql'
};

const db2Connection: DbConnection = {
  id: 2,
  name: process.env.DB2_NAME || 'stock',
  host: process.env.DB2_HOST || '139.196.78.195',
  port: parseInt(process.env.DB2_PORT || '3306'),
  username: process.env.DB2_USER || 'ppg',
  password: process.env.DB2_PASSWORD || 'dickwin2003@gmail.com',
  database_name: process.env.DB2_DATABASE || 'stock_pick',
  db_type: process.env.DB2_TYPE || 'mysql'
};

const db3Connection: DbConnection = {
  id: 3,
  name: process.env.DB3_NAME || 'test110',
  host: process.env.DB3_HOST || '119.91.39.7',
  port: parseInt(process.env.DB3_PORT || '3305'),
  username: process.env.DB3_USER || 'root',
  password: process.env.DB3_PASSWORD || 'root', // 请替换为正确的密码
  database_name: process.env.DB3_DATABASE || 'dataops45',
  db_type: process.env.DB3_TYPE || 'mysql'
};

// Added from database: prd_local
const db4Connection: DbConnection = {
  id: 4,
  name: 'prd_local',
  host: '127.0.0.1',
  port: 3306,
  username: 'root',
  password: 'root',
  database_name: 'prd_local',
  db_type: 'mysql'
};

// Added from database: fff
const db5Connection: DbConnection = {
  id: 6,
  name: 'fff',
  host: '1131',
  port: 3306,
  username: 'gzzhengjing',
  password: 'a123456',
  database_name: 'ffff',
  db_type: 'mysql'
};

// 预定义的数据库连接
export const dbConnections: Record<string, DbConnection> = {
  [db1Connection.name]: db1Connection,
  [db2Connection.name]: db2Connection,
  [db3Connection.name]: db3Connection,
  [db4Connection.name]: db4Connection,
  [db5Connection.name]: db5Connection
};

/**
 * 根据名称获取数据库连接信息
 * @param name 连接名称
 * @returns 数据库连接信息
 */
export function getDbConnectionByName(name: string): DbConnection | null {
  return dbConnections[name] || null;
}

/**
 * 根据ID获取数据库连接信息
 * @param id 连接ID
 * @returns 数据库连接信息
 */
export function getDbConnectionById(id: number): DbConnection | null {
  for (const key in dbConnections) {
    if (dbConnections[key].id === id) {
      return dbConnections[key];
    }
  }
  return null;
}

/**
 * 获取所有数据库连接
 * @returns 所有数据库连接的数组
 */
export function getAllDbConnections(): DbConnection[] {
  return Object.values(dbConnections);
}
